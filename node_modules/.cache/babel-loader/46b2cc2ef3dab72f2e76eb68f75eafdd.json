{"ast":null,"code":"import React from 'react';\nconst apiKey = process.env.REACT_APP_APIKEY;\n\nfunction existCity(data, id) {\n  const exits = data.filter(city => city.id === id);\n  return exits.length !== 0 ? true : false;\n}\n\nfunction fetchCity(ciudad, setData, data) {\n  fetch(`http://api.openweathermap.org/data/2.5/weather?q=${ciudad}&appid=${apiKey}&units=metric`).then(r => r.json()).then(recurso => {\n    console.log(recurso);\n\n    if (recurso.main !== undefined) {\n      const ciudad = {\n        min: Math.round(recurso.main.temp_min),\n        max: Math.round(recurso.main.temp_max),\n        img: recurso.weather[0].icon,\n        id: recurso.id,\n        wind: recurso.wind.speed,\n        temp: recurso.main.temp,\n        name: recurso.name,\n        weather: recurso.weather[0].main,\n        clouds: recurso.clouds.all,\n        latitud: recurso.coord.lat,\n        longitud: recurso.coord.lon\n      };\n\n      if (!existCity(data, ciudad.id)) {\n        setData(oldCities => [...oldCities, ciudad]);\n      } else {\n        alert(\"La ciudad ya existe!\");\n      }\n    } else {\n      alert(\"Ciudad no encontrada\");\n    }\n  });\n}\n\nexport default fetchCity;","map":{"version":3,"names":["React","apiKey","process","env","REACT_APP_APIKEY","existCity","data","id","exits","filter","city","length","fetchCity","ciudad","setData","fetch","then","r","json","recurso","console","log","main","undefined","min","Math","round","temp_min","max","temp_max","img","weather","icon","wind","speed","temp","name","clouds","all","latitud","coord","lat","longitud","lon","oldCities","alert"],"sources":["/Users/macpro/Desktop/1-idooGROUPMAIN/0-EstudioProyectos/SoyHenry/Fullstack/Cursosoyhenry/FT-M2-master/cursohenryM2/06-React-Intro/homework/deployM2/src/services/fetchCity.js"],"sourcesContent":["import React from 'react'\nconst apiKey = process.env.REACT_APP_APIKEY;\n\nfunction existCity(data, id) {\n    const exits = data.filter(city => city.id === id)\n    return exits.length !== 0 ? true : false;\n}\n\nfunction fetchCity(ciudad, setData, data) {\n    fetch(`http://api.openweathermap.org/data/2.5/weather?q=${ciudad}&appid=${apiKey}&units=metric`)\n        .then(r => r.json())\n        .then((recurso) => {\n            console.log(recurso);\n            if (recurso.main !== undefined) {\n                const ciudad = {\n                    min: Math.round(recurso.main.temp_min),\n                    max: Math.round(recurso.main.temp_max),\n                    img: recurso.weather[0].icon,\n                    id: recurso.id,\n                    wind: recurso.wind.speed,\n                    temp: recurso.main.temp,\n                    name: recurso.name,\n                    weather: recurso.weather[0].main,\n                    clouds: recurso.clouds.all,\n                    latitud: recurso.coord.lat,\n                    longitud: recurso.coord.lon\n                };\n                if (!existCity(data, ciudad.id)) {\n                    setData(oldCities => [...oldCities, ciudad]);\n                } else {\n                    alert(\"La ciudad ya existe!\");\n                }\n            } else {\n                alert(\"Ciudad no encontrada\");\n            }\n        });\n}\n\nexport default fetchCity\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA3B;;AAEA,SAASC,SAAT,CAAmBC,IAAnB,EAAyBC,EAAzB,EAA6B;EACzB,MAAMC,KAAK,GAAGF,IAAI,CAACG,MAAL,CAAYC,IAAI,IAAIA,IAAI,CAACH,EAAL,KAAYA,EAAhC,CAAd;EACA,OAAOC,KAAK,CAACG,MAAN,KAAiB,CAAjB,GAAqB,IAArB,GAA4B,KAAnC;AACH;;AAED,SAASC,SAAT,CAAmBC,MAAnB,EAA2BC,OAA3B,EAAoCR,IAApC,EAA0C;EACtCS,KAAK,CAAE,oDAAmDF,MAAO,UAASZ,MAAO,eAA5E,CAAL,CACKe,IADL,CACUC,CAAC,IAAIA,CAAC,CAACC,IAAF,EADf,EAEKF,IAFL,CAEWG,OAAD,IAAa;IACfC,OAAO,CAACC,GAAR,CAAYF,OAAZ;;IACA,IAAIA,OAAO,CAACG,IAAR,KAAiBC,SAArB,EAAgC;MAC5B,MAAMV,MAAM,GAAG;QACXW,GAAG,EAAEC,IAAI,CAACC,KAAL,CAAWP,OAAO,CAACG,IAAR,CAAaK,QAAxB,CADM;QAEXC,GAAG,EAAEH,IAAI,CAACC,KAAL,CAAWP,OAAO,CAACG,IAAR,CAAaO,QAAxB,CAFM;QAGXC,GAAG,EAAEX,OAAO,CAACY,OAAR,CAAgB,CAAhB,EAAmBC,IAHb;QAIXzB,EAAE,EAAEY,OAAO,CAACZ,EAJD;QAKX0B,IAAI,EAAEd,OAAO,CAACc,IAAR,CAAaC,KALR;QAMXC,IAAI,EAAEhB,OAAO,CAACG,IAAR,CAAaa,IANR;QAOXC,IAAI,EAAEjB,OAAO,CAACiB,IAPH;QAQXL,OAAO,EAAEZ,OAAO,CAACY,OAAR,CAAgB,CAAhB,EAAmBT,IARjB;QASXe,MAAM,EAAElB,OAAO,CAACkB,MAAR,CAAeC,GATZ;QAUXC,OAAO,EAAEpB,OAAO,CAACqB,KAAR,CAAcC,GAVZ;QAWXC,QAAQ,EAAEvB,OAAO,CAACqB,KAAR,CAAcG;MAXb,CAAf;;MAaA,IAAI,CAACtC,SAAS,CAACC,IAAD,EAAOO,MAAM,CAACN,EAAd,CAAd,EAAiC;QAC7BO,OAAO,CAAC8B,SAAS,IAAI,CAAC,GAAGA,SAAJ,EAAe/B,MAAf,CAAd,CAAP;MACH,CAFD,MAEO;QACHgC,KAAK,CAAC,sBAAD,CAAL;MACH;IACJ,CAnBD,MAmBO;MACHA,KAAK,CAAC,sBAAD,CAAL;IACH;EACJ,CA1BL;AA2BH;;AAED,eAAejC,SAAf"},"metadata":{},"sourceType":"module"}